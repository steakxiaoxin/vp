---
title: 浏览器相关
date: 2019-11-04
sidebar: "auto"
categories:
  - front-end
tags:
  - browser
keys:
  - "bixin"
publish: false
---

[(1.6w字)浏览器与前端性能灵魂之问，请问你能接得住几个？（上）](https://juejin.im/post/5df5bcea6fb9a016091def69)

## 浏览器相关

### 1.浏览器从输入URL到展示经历了什么

1. DNS 查询
2. TCP 连接
3. HTTP 请求即响应
4. 服务器响应
5. 客户端渲染
   1. 处理 HTML 标记并构建 DOM 树。
   2. 处理 CSS 标记并构建 CSSOM 树。
   3. 将 DOM 与 CSSOM 合并成一个渲染树。
   4. 根据渲染树来布局，以计算每个节点的几何信息。
   5. 将各个节点绘制到屏幕上。

### 2. 浏览器缓存

1. 强缓存 200 (优先级从高到低分别是 Pragma -> Cache-Control -> Expires)
   - Pragma：支持 http1.0；可设置 no-cache，表示不缓存资源；优先级最高
   - Cache-Control：支持 http1.1；可设置 no-cache、max-age = 3600 (s)；优先级中等
   - Expires：支持 http1.0；可设置一个格林尼治时间；优先级最低
2. 协商缓存 304
   - ETag/If-None-Match 高
   - Last-Modified/If-Modified-Since 低

总结:

- 首先通过 `Cache-Control` 验证强缓存是否可用，如果强缓存可用，直接使用
- 否则进入协商缓存，即发送 HTTP 请求，服务器通过请求头中的 `Last-Modified`或者`ETag`字段检查资源是否更新 
  - 若资源更新，返回资源和200状态码
  - 否则，返回304，告诉浏览器直接从缓存获取资源

### 3. 本地存储

1. cookie
2. localstorage
3. sessionstorage
4. IndexedDB

### 4. 重绘回流
https://juejin.im/post/5df5bcea6fb9a016091def69#heading-54
https://juejin.im/post/5df1e312f265da33d039d06d#heading-67


### 5. XSS 和 CSRF

### 6. HTTPS

### 7. 跨域

4.4 GET 和 POST 的区别
(1) GET 请求在浏览器回退和刷新时是无害的，而 POST 请求会告知用户数据会被重新提交；
(2) GET 请求可以收藏为书签，POST 请求不可以收藏为书签；
(3) GET 请求可以被缓存，POST 请求不可以被缓存，除非在响应头中包含合适的 Cache-Control/Expires 字段，但是不建议缓存 POST 请求，其不满足幂等性，每次调用都会对服务器资源造成影响；
(4) GET 请求一般不具有请求体，因此只能进行 url 编码，而 POST 请求支持多种编码方式。
(5) GET 请求的参数可以被保留在浏览器的历史中，POST 请求不会被保留；
(6) GET 请求因为是向 URL 添加数据，不同的浏览器厂商，代理服务器，web 服务器都可能会有自己的长度限制，而 POST 请求无长度限制；
(7) GET 请求只允许 ASCII 字符，POST 请求无限制，支持二进制数据；
(8) GET 请求的安全性较差，数据被暴露在浏览器的 URL 中，所以不能用来传递敏感信息，POST 请求的安全性较好，数据不会暴露在 URL 中；
(9) GET 请求具有幂等性(多次请求不会对资源造成影响)，POST 请求不幂等；
(10) GET 请求一般不具有请求体，请求中一般不包含 100-continue 协议，所以只会发一次请求，而 POST 请求在发送数据到服务端之前允许双方"握手"，客户端先发送 Expect:100-continue 消息，询问服务端是否愿意接收数据，接收到服务端正确的 100-continue 应答后才会将请求体发送给服务端，服务端再响应 200 返回数据。

5.6 跨标签页的通讯方式有哪些
(1) BroadCast Channel
(2) Service Worker
(3) LocalStorage + window.onstorage 监听
(4) Shared Worker + 定时器轮询(setInterval)
(5) IndexedDB + 定时器轮询(setInterval)
(6) cookie + 定时器轮询(setInterval)
(7) window.open + window.postMessage
(8) Websocket

<br/>
<Valine></Valine>
